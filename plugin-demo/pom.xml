<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>com.skuehnel</groupId>
        <artifactId>dbvisualizer</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </parent>
    <groupId>com.skuehnel</groupId>
    <artifactId>dbvisualizer-plugin-demo</artifactId>
    <name>DB Visualizer Plugin Demo</name>

    <description>Demo with an in-memory H2 Database. ER-Diagram and HTML-Report are generated by the maven plugin
    </description>

    <properties>
        <maven.compiler.source>11</maven.compiler.source>
        <maven.compiler.target>11</maven.compiler.target>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <version>3.2.0</version>
                <executions>
                    <execution>
                        <id>regex-property</id>
                        <goals>
                            <goal>regex-property</goal>
                        </goals>
                        <configuration>
                            <name>baseDirForH2</name>
                            <regex>\\</regex>
                            <replacement>/</replacement>
                            <value>${project.basedir}</value>
                            <failIfNoMatch>false</failIfNoMatch>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>com.skuehnel</groupId>
                <artifactId>dbvisualizer-maven-plugin</artifactId>
                <version>1.0.0-SNAPSHOT</version>
                <configuration>
                    <!-- PostgreSQL Demo -->

                    <!-- Uncomment and replace user name and passowrd -->
                    <!--
                    <db_user>_replace_me_</db_user>
                    <db_password>_replace_me_</db_password>
                    <driver>org.postgresql.Driver</driver>
                    <jdbcurl>jdbc:postgresql://[::1]:5432/test</jdbcurl>
                    <diagramFile>test-diagram-postgresql.png</diagramFile>
                    <diagramFormat>PNG</diagramFormat>
                    <reportFile>test-report-postgresql.html</reportFile>
                    <reportFormat>HTML</reportFormat>
                    <reportMetadata>true</reportMetadata>
                    <schema>test</schema>
                    -->
                    <!-- H2 Demo -->
                    <!--
                    <db_user>test</db_user>
                    <db_password>test</db_password>
                    <driver>org.h2.Driver</driver>
                    <jdbcurl>jdbc:h2:mem:test;MODE=PostgreSQL;INIT=RUNSCRIPT FROM '${baseDirForH2}/src/main/resources/init.sql';</jdbcurl>
                    <diagramFile>test-diagram.png</diagramFile>
                    <diagramFormat>PNG</diagramFormat>
                    <reportFile>test-report.html</reportFile>
                    <reportFormat>HTML</reportFormat>
                    <catalog>test</catalog>
                    <schema>PUBLIC</schema>
                    <dialect>H2</dialect>
                    -->
                    <!-- MySQL Demo -->
                    <!--
                    <db_user> _replace_me_ </db_user>
                    <db_password> _replace_me_ </db_password>
                    <driver>com.mysql.jdbc.Driver</driver>
                    <jdbcurl>jdbc:mysql://localhost:3306/mysql-test</jdbcurl>
                    <diagramFile>mysql-test-diagram.png</diagramFile>
                    <diagramFormat>PNG</diagramFormat>
                    <reportFile>mysql-test-report.html</reportFile>
                    <reportFormat>HTML</reportFormat>
                    <dialect>MYSQL</dialect>
                    <schema>mysql-test</schema>
                    <filter>employee.*</filter>
                    -->
                </configuration>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>dbvisualizer</goal>
                        </goals>
                    </execution>
                </executions>
                <dependencies>
                    <dependency>
                        <groupId>org.postgresql</groupId>
                        <artifactId>postgresql</artifactId>
                        <version>42.5.1</version>
                    </dependency>
                    <dependency>
                        <groupId>mysql</groupId>
                        <artifactId>mysql-connector-java</artifactId>
                        <version>8.0.32</version>
                    </dependency>
                    <!--
                      Please remove comment, if you want to try this locally (being aware of the possible risk
                      which was reported as CVE-2022-45868)
                    -->
                    <!--
                    <dependency>
                        <groupId>com.h2database</groupId>
                        <artifactId>h2</artifactId>
                        <version>2.1.214</version>
                    </dependency>
                    -->
                </dependencies>
            </plugin>
        </plugins>
    </build>
</project>
